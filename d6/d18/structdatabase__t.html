<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>strongSwan: database_t Struct Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../strongswan.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">strongSwan
   &#160;<span id="projectnumber">5.3.5</span>
   </div>
   <div id="projectbrief">IPSec implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d6/d18/structdatabase__t.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../d1/da5/structdatabase__t-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">database_t Struct Reference<div class="ingroups"><a class="el" href="../../d6/d20/group__databasei.html">database</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &quot;<a class="el" href="../../d8/d9c/database_8h_source.html">database.h</a>&quot;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for database_t:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/dca/structdatabase__t__coll__graph.svg" width="110" height="128"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a187f28e81901f2ea9911672c15ad7c11"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/dd3/structenumerator__t.html">enumerator_t</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d18/structdatabase__t.html#a187f28e81901f2ea9911672c15ad7c11">query</a> )(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this, char *sql,...)</td></tr>
<tr class="separator:a187f28e81901f2ea9911672c15ad7c11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1202b615fba3fa49554131b9ab9fad6"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d18/structdatabase__t.html#ab1202b615fba3fa49554131b9ab9fad6">execute</a> )(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this, int *rowid, char *sql,...)</td></tr>
<tr class="separator:ab1202b615fba3fa49554131b9ab9fad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e35200ff2b1e78da65e9e61b874ddee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/dbb/group__types__i.html#gabb452686968e48b67397da5f97445f5b">bool</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d18/structdatabase__t.html#a9e35200ff2b1e78da65e9e61b874ddee">transaction</a> )(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this, <a class="el" href="../../d7/dbb/group__types__i.html#gabb452686968e48b67397da5f97445f5b">bool</a> serializable)</td></tr>
<tr class="separator:a9e35200ff2b1e78da65e9e61b874ddee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21e510ced064247535b694f68f5f56d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/dbb/group__types__i.html#gabb452686968e48b67397da5f97445f5b">bool</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d18/structdatabase__t.html#a21e510ced064247535b694f68f5f56d5">commit</a> )(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this)</td></tr>
<tr class="separator:a21e510ced064247535b694f68f5f56d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee4a9bcea8187248cead39803fd4aae7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/dbb/group__types__i.html#gabb452686968e48b67397da5f97445f5b">bool</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d18/structdatabase__t.html#aee4a9bcea8187248cead39803fd4aae7">rollback</a> )(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this)</td></tr>
<tr class="separator:aee4a9bcea8187248cead39803fd4aae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a199a496bff7765450610643584a7e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d20/group__databasei.html#ga250e9cdf1e9f9e7b128d3a9d0b9ad71a">db_driver_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d18/structdatabase__t.html#a1a199a496bff7765450610643584a7e0">get_driver</a> )(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this)</td></tr>
<tr class="separator:a1a199a496bff7765450610643584a7e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae178252213f30006cb359e380c73a165"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d18/structdatabase__t.html#ae178252213f30006cb359e380c73a165">destroy</a> )(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this)</td></tr>
<tr class="separator:ae178252213f30006cb359e380c73a165"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface for a database implementation.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> affected, rowid, aint;</div>
<div class="line"><span class="keywordtype">char</span> *atext;</div>
<div class="line"><a class="code" href="../../d6/d18/structdatabase__t.html">database_t</a> *<a class="code" href="../../d4/de5/pool_8c.html#a185fc72f30eb00d9276fea662a7b7de2">db</a>;</div>
<div class="line"><a class="code" href="../../db/dd3/structenumerator__t.html">enumerator_t</a> *enumerator;</div>
<div class="line"></div>
<div class="line">db = <a class="code" href="../../d3/d99/group__library.html#gab7a6e433c9311a97d217ce0c4a16f5e7">lib</a>-&gt;database-&gt;create(<span class="stringliteral">&quot;mysql://user:pass@host/database&quot;</span>);</div>
<div class="line">affected = db-&gt;<a class="code" href="../../d6/d18/structdatabase__t.html#ab1202b615fba3fa49554131b9ab9fad6">execute</a>(db, &amp;rowid, <span class="stringliteral">&quot;INSERT INTO table VALUES (?, ?)&quot;</span>,</div>
<div class="line">                      <a class="code" href="../../d6/d20/group__databasei.html#gga1a156e5f25798b6003569ad32aed1e12a66e079c3fefe3f243804c53ce3488e26">DB_INT</a>, 77, <a class="code" href="../../d6/d20/group__databasei.html#gga1a156e5f25798b6003569ad32aed1e12a2a9e994d6b005621cefc2006b59ff6fe">DB_TEXT</a>, <span class="stringliteral">&quot;a text&quot;</span>);</div>
<div class="line"><a class="code" href="../../d1/dc8/group__printf__hook__builtin.html#ga3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>(<span class="stringliteral">&quot;inserted %d row, new row ID: %d\n&quot;</span>, affected, rowid);</div>
<div class="line"></div>
<div class="line">enumerator = db-&gt;<a class="code" href="../../d6/d18/structdatabase__t.html#a187f28e81901f2ea9911672c15ad7c11">query</a>(db, <span class="stringliteral">&quot;SELECT aint, atext FROM table WHERE aint &gt; ?&quot;</span>,</div>
<div class="line">                      <a class="code" href="../../d6/d20/group__databasei.html#gga1a156e5f25798b6003569ad32aed1e12a66e079c3fefe3f243804c53ce3488e26">DB_INT</a>, 10,      <span class="comment">// 1 argument to SQL string</span></div>
<div class="line">                      <a class="code" href="../../d6/d20/group__databasei.html#gga1a156e5f25798b6003569ad32aed1e12a66e079c3fefe3f243804c53ce3488e26">DB_INT</a>, <a class="code" href="../../d6/d20/group__databasei.html#gga1a156e5f25798b6003569ad32aed1e12a2a9e994d6b005621cefc2006b59ff6fe">DB_TEXT</a>); <span class="comment">// 2 enumerated types in query</span></div>
<div class="line"><span class="keywordflow">if</span> (enumerator)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordflow">while</span> (enumerator-&gt;<a class="code" href="../../db/dd3/structenumerator__t.html#a38cd1d97cc0f06351f701546e896aaf7">enumerate</a>(enumerator, &amp;aint, &amp;atext))</div>
<div class="line">   {</div>
<div class="line">       <a class="code" href="../../d1/dc8/group__printf__hook__builtin.html#ga3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>(<span class="stringliteral">&quot;%d: %s\n&quot;</span>, aint, atext);</div>
<div class="line">   }</div>
<div class="line">   enumerator-&gt;<a class="code" href="../../db/dd3/structenumerator__t.html#a56c66aa7f0314f87d79aa61aac16c1ca">destroy</a>(enumerator);</div>
<div class="line">}</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="../../d8/d9c/database_8h_source.html#l00093">93</a> of file <a class="el" href="../../d8/d9c/database_8h_source.html">database.h</a>.</p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a21e510ced064247535b694f68f5f56d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/dbb/group__types__i.html#gabb452686968e48b67397da5f97445f5b">bool</a>(* database_t::commit)(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Commit all changes made during the current transaction.</p>
<dl class="section return"><dt>Returns</dt><dd>TRUE on success </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d9c/database_8h_source.html#l00141">141</a> of file <a class="el" href="../../d8/d9c/database_8h_source.html">database.h</a>.</p>

<p>Referenced by <a class="el" href="../../d4/de5/pool_8c_source.html#l00319">add()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00408">add_addresses()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00854">batch()</a>, <a class="el" href="../../d6/d05/attr__sql__provider_8c_source.html#l00049">get_identity()</a>, and <a class="el" href="../../d4/de5/pool_8c_source.html#l00524">resize()</a>.</p>

</div>
</div>
<a class="anchor" id="ae178252213f30006cb359e380c73a165"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* database_t::destroy)(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy a database connection. </p>

<p>Definition at line <a class="el" href="../../d8/d9c/database_8h_source.html#l00163">163</a> of file <a class="el" href="../../d8/d9c/database_8h_source.html">database.h</a>.</p>

<p>Referenced by <a class="el" href="../../d4/de5/pool_8c_source.html#l00915">cleanup()</a>, <a class="el" href="../../d7/dd8/eap__simaka__sql__plugin_8c_source.html#l00059">load_db()</a>, <a class="el" href="../../d8/dae/imv__policy__manager_8c_source.html#l00362">main()</a>, <a class="el" href="../../d2/dd2/storage_8c_source.html#l00099">METHOD()</a>, <a class="el" href="../../df/de6/attr__sql__plugin_8c_source.html#l00056">open_database()</a>, and <a class="el" href="../../d9/d8a/pacman_8c_source.html#l00282">process_packages()</a>.</p>

</div>
</div>
<a class="anchor" id="ab1202b615fba3fa49554131b9ab9fad6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* database_t::execute)(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this, int *rowid, char *sql,...)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Execute a query which does not return rows, such as INSERT.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rowid</td><td>pointer to write inserted AUTO_INCREMENT row ID, or NULL </td></tr>
    <tr><td class="paramname">sql</td><td>sql string, containing '?' placeholders </td></tr>
    <tr><td class="paramname">...</td><td>list of sql placeholder db_type_t followed by its value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of affected rows, &lt; 0 on failure </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d9c/database_8h_source.html#l00113">113</a> of file <a class="el" href="../../d8/d9c/database_8h_source.html">database.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d8e/peer__controller_8c_source.html#l00156">add()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00355">add_address()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00408">add_addresses()</a>, <a class="el" href="../../df/d63/pool__attributes_8c_source.html#l00325">add_attr()</a>, <a class="el" href="../../d2/d6b/attest__db_8c_source.html#l01673">add_hash()</a>, <a class="el" href="../../d6/d05/attr__sql__provider_8c_source.html#l00447">attr_sql_provider_create()</a>, <a class="el" href="../../d6/d05/attr__sql__provider_8c_source.html#l00131">check_lease()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00057">create_pool()</a>, <a class="el" href="../../d3/dd3/imv__database_8c_source.html#l00063">create_session()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00484">del()</a>, <a class="el" href="../../df/d63/pool__attributes_8c_source.html#l00393">del_attr()</a>, <a class="el" href="../../d7/d8e/peer__controller_8c_source.html#l00308">delete()</a>, <a class="el" href="../../d7/d8e/peer__controller_8c_source.html#l00234">edit()</a>, <a class="el" href="../../df/d63/pool__attributes_8c_source.html#l00271">get_attr_pool()</a>, <a class="el" href="../../d6/d05/attr__sql__provider_8c_source.html#l00049">get_identity()</a>, <a class="el" href="../../d6/d05/attr__sql__provider_8c_source.html#l00177">get_lease()</a>, <a class="el" href="../../d2/d6b/attest__db_8c_source.html#l01607">insert_file_hash()</a>, <a class="el" href="../../d8/dae/imv__policy__manager_8c_source.html#l00059">iterate_enforcements()</a>, <a class="el" href="../../d2/dff/medcli__listener_8c_source.html#l00111">medcli_listener_create()</a>, <a class="el" href="../../d2/d6b/attest__db_8c_source.html#l00217">METHOD()</a>, <a class="el" href="../../d8/dae/imv__policy__manager_8c_source.html#l00173">policy_start()</a>, <a class="el" href="../../d8/dae/imv__policy__manager_8c_source.html#l00253">policy_stop()</a>, <a class="el" href="../../d9/d8a/pacman_8c_source.html#l00282">process_packages()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00822">purge()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00524">resize()</a>, <a class="el" href="../../d2/dff/medcli__listener_8c_source.html#l00052">set_state()</a>, and <a class="el" href="../../d9/d8a/pacman_8c_source.html#l00120">update_database()</a>.</p>

</div>
</div>
<a class="anchor" id="a1a199a496bff7765450610643584a7e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d20/group__databasei.html#ga250e9cdf1e9f9e7b128d3a9d0b9ad71a">db_driver_t</a>(* database_t::get_driver)(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the database implementation type.</p>
<p>To allow driver specific SQL or performance optimizations each database implementations can be queried for its type.</p>
<dl class="section return"><dt>Returns</dt><dd>database implementation type </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d9c/database_8h_source.html#l00158">158</a> of file <a class="el" href="../../d8/d9c/database_8h_source.html">database.h</a>.</p>

</div>
</div>
<a class="anchor" id="a187f28e81901f2ea9911672c15ad7c11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/dd3/structenumerator__t.html">enumerator_t</a>*(* database_t::query)(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this, char *sql,...)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Run a query which returns rows, such as a SELECT.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sql</td><td>sql query string, containing '?' placeholders </td></tr>
    <tr><td class="paramname">...</td><td>list of sql placeholder db_type_t followed by its value, followed by enumerators arguments as db_type_t's </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>enumerator as defined with arguments, NULL on failure </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d9c/database_8h_source.html#l00103">103</a> of file <a class="el" href="../../d8/d9c/database_8h_source.html">database.h</a>.</p>

<p>Referenced by <a class="el" href="../../de/d0b/sql__config_8c_source.html#l00189">add_child_cfgs()</a>, <a class="el" href="../../de/d0b/sql__config_8c_source.html#l00125">add_esp_proposals()</a>, <a class="el" href="../../d2/d6b/attest__db_8c_source.html#l01673">add_hash()</a>, <a class="el" href="../../de/d0b/sql__config_8c_source.html#l00215">add_ike_proposals()</a>, <a class="el" href="../../de/d0b/sql__config_8c_source.html#l00097">add_traffic_selectors()</a>, <a class="el" href="../../d3/dd3/imv__database_8c_source.html#l00228">add_workitems()</a>, <a class="el" href="../../d6/d05/attr__sql__provider_8c_source.html#l00131">check_lease()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00589">create_lease_query()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00057">create_pool()</a>, <a class="el" href="../../d3/dd3/imv__database_8c_source.html#l00063">create_session()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00484">del()</a>, <a class="el" href="../../df/d63/pool__attributes_8c_source.html#l00393">del_attr()</a>, <a class="el" href="../../d7/d8e/peer__controller_8c_source.html#l00234">edit()</a>, <a class="el" href="../../d6/d05/attr__sql__provider_8c_source.html#l00085">get_attr_pool()</a>, <a class="el" href="../../d6/d05/attr__sql__provider_8c_source.html#l00049">get_identity()</a>, <a class="el" href="../../de/d0b/sql__config_8c_source.html#l00275">get_ike_cfg_by_id()</a>, <a class="el" href="../../d6/d05/attr__sql__provider_8c_source.html#l00177">get_lease()</a>, <a class="el" href="../../de/d0b/sql__config_8c_source.html#l00296">get_peer_cfg_by_id()</a>, <a class="el" href="../../d6/d05/attr__sql__provider_8c_source.html#l00105">get_pool()</a>, <a class="el" href="../../d2/d6b/attest__db_8c_source.html#l01607">insert_file_hash()</a>, <a class="el" href="../../d8/dae/imv__policy__manager_8c_source.html#l00059">iterate_enforcements()</a>, <a class="el" href="../../d7/d8e/peer__controller_8c_source.html#l00055">list()</a>, <a class="el" href="../../d1/d16/user__controller_8c_source.html#l00079">login()</a>, <a class="el" href="../../d2/d6b/attest__db_8c_source.html#l00217">METHOD()</a>, <a class="el" href="../../d8/dae/imv__policy__manager_8c_source.html#l00173">policy_start()</a>, <a class="el" href="../../d8/dae/imv__policy__manager_8c_source.html#l00253">policy_stop()</a>, <a class="el" href="../../d9/d8a/pacman_8c_source.html#l00282">process_packages()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00524">resize()</a>, <a class="el" href="../../d0/d7f/medcli__config_8c_source.html#l00329">schedule_autoinit()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00115">status()</a>, <a class="el" href="../../df/d63/pool__attributes_8c_source.html#l00570">status_attr()</a>, and <a class="el" href="../../d9/d8a/pacman_8c_source.html#l00120">update_database()</a>.</p>

</div>
</div>
<a class="anchor" id="aee4a9bcea8187248cead39803fd4aae7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/dbb/group__types__i.html#gabb452686968e48b67397da5f97445f5b">bool</a>(* database_t::rollback)(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback/revert all changes made during the current transaction.</p>
<dl class="section return"><dt>Returns</dt><dd>TRUE on success </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d9c/database_8h_source.html#l00148">148</a> of file <a class="el" href="../../d8/d9c/database_8h_source.html">database.h</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d05/attr__sql__provider_8c_source.html#l00049">get_identity()</a>.</p>

</div>
</div>
<a class="anchor" id="a9e35200ff2b1e78da65e9e61b874ddee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/dbb/group__types__i.html#gabb452686968e48b67397da5f97445f5b">bool</a>(* database_t::transaction)(<a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a> *this, <a class="el" href="../../d7/dbb/group__types__i.html#gabb452686968e48b67397da5f97445f5b">bool</a> serializable)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start a transaction.</p>
<p>A serializable transaction forces a strict separation between other transactions. Due to the performance overhead they should only be used in certain situations (e.g. SELECT-&gt;INSERT|UPDATE).</p>
<dl class="section note"><dt>Note</dt><dd>Either <a class="el" href="../../d6/d18/structdatabase__t.html#a21e510ced064247535b694f68f5f56d5">commit()</a> or <a class="el" href="../../d6/d18/structdatabase__t.html#aee4a9bcea8187248cead39803fd4aae7">rollback()</a> has to be called to end the transaction. </dd>
<dd>
Transactions are thread-specific. So <a class="el" href="../../d6/d18/structdatabase__t.html#a21e510ced064247535b694f68f5f56d5">commit()</a>/rollbak() has to be called from the same thread. </dd>
<dd>
While this method can be called multiple times (commit/rollback have to be called an equal number of times) real nested transactions are not supported. So if any if the "inner" transactions are rolled back the outer most transaction is rolled back.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serializable</td><td>TRUE to create a serializable transaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE on success </dd></dl>

<p>Definition at line <a class="el" href="../../d8/d9c/database_8h_source.html#l00134">134</a> of file <a class="el" href="../../d8/d9c/database_8h_source.html">database.h</a>.</p>

<p>Referenced by <a class="el" href="../../d4/de5/pool_8c_source.html#l00319">add()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00408">add_addresses()</a>, <a class="el" href="../../d4/de5/pool_8c_source.html#l00854">batch()</a>, <a class="el" href="../../d6/d05/attr__sql__provider_8c_source.html#l00049">get_identity()</a>, and <a class="el" href="../../d4/de5/pool_8c_source.html#l00524">resize()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="../../d8/d9c/database_8h_source.html">database.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d6/d18/structdatabase__t.html">database_t</a></li>
    <li class="footer">Generated on Wed Jan 20 2016 14:04:26 for strongSwan by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
