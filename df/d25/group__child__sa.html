<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>strongSwan: child_sa</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../strongswan.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">strongSwan
   &#160;<span id="projectnumber">5.3.5</span>
   </div>
   <div id="projectbrief">IPSec implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('df/d25/group__child__sa.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">child_sa<div class="ingroups"><a class="el" href="../../dd/ddc/group__sa.html">sa</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for child_sa:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d25/group__child__sa.svg" width="171" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4a/structchild__sa__t.html">child_sa_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga0126d80c0b367ef06975182b03500557"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="../../df/d25/group__child__sa.html#ga1be90cadc11e91ef22344756cd2210aa">child_sa_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/group__child__sa.html#ga0126d80c0b367ef06975182b03500557">child_sa_state_t</a></td></tr>
<tr class="separator:ga0126d80c0b367ef06975182b03500557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga37ac33d29bd41c5cf7c24527057bac22"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d8/d4a/structchild__sa__t.html">child_sa_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/group__child__sa.html#ga37ac33d29bd41c5cf7c24527057bac22">child_sa_t</a></td></tr>
<tr class="separator:ga37ac33d29bd41c5cf7c24527057bac22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga1be90cadc11e91ef22344756cd2210aa"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/group__child__sa.html#ga1be90cadc11e91ef22344756cd2210aa">child_sa_state_t</a> { <br/>
&#160;&#160;<a class="el" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa7954a4773a11c7958b7d10d566cbadab">CHILD_CREATED</a>, 
<a class="el" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaacfa02a350c45f08d4cda0a38cc061096">CHILD_ROUTED</a>, 
<a class="el" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa728cdca720fa6f15c71ba4842fec3429">CHILD_INSTALLING</a>, 
<a class="el" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa4ab288c75f8ffa64934b536ec26a4300">CHILD_INSTALLED</a>, 
<br/>
&#160;&#160;<a class="el" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa1d9a667a9f6f7c66e36c524d1f774652">CHILD_UPDATING</a>, 
<a class="el" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa5e6bd6c9515085d446ef5dbb3494edd3">CHILD_REKEYING</a>, 
<a class="el" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa7afd68c520dd056380d77eebc7db438e">CHILD_REKEYED</a>, 
<a class="el" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa63e53de38f9dde1ffbcaf9a680027c7c">CHILD_RETRYING</a>, 
<br/>
&#160;&#160;<a class="el" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa346de0e848992f6479566be0f2aaf4ba">CHILD_DELETING</a>, 
<a class="el" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa7024c21c3e652e8645f9ee2ccc65de4f">CHILD_DESTROYING</a>
<br/>
 }</td></tr>
<tr class="separator:ga1be90cadc11e91ef22344756cd2210aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga35703a9e7caf567eda89979fb258964c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d4a/structchild__sa__t.html">child_sa_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/group__child__sa.html#ga35703a9e7caf567eda89979fb258964c">child_sa_create</a> (<a class="el" href="../../d5/dcf/structhost__t.html">host_t</a> *<a class="el" href="../../de/dca/__copyright_8c.html#a8d99cc5943d3316a2bdf3e111028fc7a">me</a>, <a class="el" href="../../d5/dcf/structhost__t.html">host_t</a> *other, <a class="el" href="../../d8/dd6/structchild__cfg__t.html">child_cfg_t</a> *config, u_int32_t reqid, <a class="el" href="../../d7/dbb/group__types__i.html#gabb452686968e48b67397da5f97445f5b">bool</a> encap, u_int mark_in, u_int mark_out)</td></tr>
<tr class="separator:ga35703a9e7caf567eda89979fb258964c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga27b9bc84afe9a793e93fec506077b1ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d70/structenum__name__t.html">enum_name_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/group__child__sa.html#ga27b9bc84afe9a793e93fec506077b1ed">child_sa_state_names</a></td></tr>
<tr class="separator:ga27b9bc84afe9a793e93fec506077b1ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga0126d80c0b367ef06975182b03500557"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="../../df/d25/group__child__sa.html#ga1be90cadc11e91ef22344756cd2210aa">child_sa_state_t</a> <a class="el" href="../../df/d25/group__child__sa.html#ga1be90cadc11e91ef22344756cd2210aa">child_sa_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d97/child__sa_8h_source.html#l00026">26</a> of file <a class="el" href="../../d4/d97/child__sa_8h_source.html">child_sa.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga37ac33d29bd41c5cf7c24527057bac22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d8/d4a/structchild__sa__t.html">child_sa_t</a> <a class="el" href="../../d8/d4a/structchild__sa__t.html">child_sa_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d97/child__sa_8h_source.html#l00027">27</a> of file <a class="el" href="../../d4/d97/child__sa_8h_source.html">child_sa.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga1be90cadc11e91ef22344756cd2210aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../df/d25/group__child__sa.html#ga1be90cadc11e91ef22344756cd2210aa">child_sa_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>States of a CHILD_SA </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="gga1be90cadc11e91ef22344756cd2210aaa7954a4773a11c7958b7d10d566cbadab"></a>CHILD_CREATED</em>&#160;</td><td class="fielddoc">
<p>Just created, uninstalled CHILD_SA </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga1be90cadc11e91ef22344756cd2210aaacfa02a350c45f08d4cda0a38cc061096"></a>CHILD_ROUTED</em>&#160;</td><td class="fielddoc">
<p>Installed SPD, but no SAD entries </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga1be90cadc11e91ef22344756cd2210aaa728cdca720fa6f15c71ba4842fec3429"></a>CHILD_INSTALLING</em>&#160;</td><td class="fielddoc">
<p>Installing an in-use CHILD_SA </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga1be90cadc11e91ef22344756cd2210aaa4ab288c75f8ffa64934b536ec26a4300"></a>CHILD_INSTALLED</em>&#160;</td><td class="fielddoc">
<p>Installed an in-use CHILD_SA </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga1be90cadc11e91ef22344756cd2210aaa1d9a667a9f6f7c66e36c524d1f774652"></a>CHILD_UPDATING</em>&#160;</td><td class="fielddoc">
<p>While updating hosts, in update_hosts() </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga1be90cadc11e91ef22344756cd2210aaa5e6bd6c9515085d446ef5dbb3494edd3"></a>CHILD_REKEYING</em>&#160;</td><td class="fielddoc">
<p>CHILD_SA which is rekeying </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga1be90cadc11e91ef22344756cd2210aaa7afd68c520dd056380d77eebc7db438e"></a>CHILD_REKEYED</em>&#160;</td><td class="fielddoc">
<p>CHILD_SA that was rekeyed, but stays installed </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga1be90cadc11e91ef22344756cd2210aaa63e53de38f9dde1ffbcaf9a680027c7c"></a>CHILD_RETRYING</em>&#160;</td><td class="fielddoc">
<p>CHILD_SA negotiation failed, but gets retried </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga1be90cadc11e91ef22344756cd2210aaa346de0e848992f6479566be0f2aaf4ba"></a>CHILD_DELETING</em>&#160;</td><td class="fielddoc">
<p>CHILD_SA in progress of delete </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga1be90cadc11e91ef22344756cd2210aaa7024c21c3e652e8645f9ee2ccc65de4f"></a>CHILD_DESTROYING</em>&#160;</td><td class="fielddoc">
<p>CHILD_SA object gets destroyed </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../d4/d97/child__sa_8h_source.html#l00038">38</a> of file <a class="el" href="../../d4/d97/child__sa_8h_source.html">child_sa.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                      {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa7954a4773a11c7958b7d10d566cbadab">CHILD_CREATED</a>,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaacfa02a350c45f08d4cda0a38cc061096">CHILD_ROUTED</a>,</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa728cdca720fa6f15c71ba4842fec3429">CHILD_INSTALLING</a>,</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa4ab288c75f8ffa64934b536ec26a4300">CHILD_INSTALLED</a>,</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa1d9a667a9f6f7c66e36c524d1f774652">CHILD_UPDATING</a>,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa5e6bd6c9515085d446ef5dbb3494edd3">CHILD_REKEYING</a>,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa7afd68c520dd056380d77eebc7db438e">CHILD_REKEYED</a>,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa63e53de38f9dde1ffbcaf9a680027c7c">CHILD_RETRYING</a>,</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa346de0e848992f6479566be0f2aaf4ba">CHILD_DELETING</a>,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa7024c21c3e652e8645f9ee2ccc65de4f">CHILD_DESTROYING</a>,</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;};</div>
<div class="ttc" id="group__child__sa_html_gga1be90cadc11e91ef22344756cd2210aaa7afd68c520dd056380d77eebc7db438e"><div class="ttname"><a href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa7afd68c520dd056380d77eebc7db438e">CHILD_REKEYED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d97/child__sa_8h_source.html#l00073">child_sa.h:73</a></div></div>
<div class="ttc" id="group__child__sa_html_gga1be90cadc11e91ef22344756cd2210aaacfa02a350c45f08d4cda0a38cc061096"><div class="ttname"><a href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaacfa02a350c45f08d4cda0a38cc061096">CHILD_ROUTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d97/child__sa_8h_source.html#l00048">child_sa.h:48</a></div></div>
<div class="ttc" id="group__child__sa_html_gga1be90cadc11e91ef22344756cd2210aaa7954a4773a11c7958b7d10d566cbadab"><div class="ttname"><a href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa7954a4773a11c7958b7d10d566cbadab">CHILD_CREATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d97/child__sa_8h_source.html#l00043">child_sa.h:43</a></div></div>
<div class="ttc" id="group__child__sa_html_gga1be90cadc11e91ef22344756cd2210aaa5e6bd6c9515085d446ef5dbb3494edd3"><div class="ttname"><a href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa5e6bd6c9515085d446ef5dbb3494edd3">CHILD_REKEYING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d97/child__sa_8h_source.html#l00068">child_sa.h:68</a></div></div>
<div class="ttc" id="group__child__sa_html_gga1be90cadc11e91ef22344756cd2210aaa63e53de38f9dde1ffbcaf9a680027c7c"><div class="ttname"><a href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa63e53de38f9dde1ffbcaf9a680027c7c">CHILD_RETRYING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d97/child__sa_8h_source.html#l00078">child_sa.h:78</a></div></div>
<div class="ttc" id="group__child__sa_html_gga1be90cadc11e91ef22344756cd2210aaa7024c21c3e652e8645f9ee2ccc65de4f"><div class="ttname"><a href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa7024c21c3e652e8645f9ee2ccc65de4f">CHILD_DESTROYING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d97/child__sa_8h_source.html#l00088">child_sa.h:88</a></div></div>
<div class="ttc" id="group__child__sa_html_gga1be90cadc11e91ef22344756cd2210aaa4ab288c75f8ffa64934b536ec26a4300"><div class="ttname"><a href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa4ab288c75f8ffa64934b536ec26a4300">CHILD_INSTALLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d97/child__sa_8h_source.html#l00058">child_sa.h:58</a></div></div>
<div class="ttc" id="group__child__sa_html_gga1be90cadc11e91ef22344756cd2210aaa1d9a667a9f6f7c66e36c524d1f774652"><div class="ttname"><a href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa1d9a667a9f6f7c66e36c524d1f774652">CHILD_UPDATING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d97/child__sa_8h_source.html#l00063">child_sa.h:63</a></div></div>
<div class="ttc" id="group__child__sa_html_gga1be90cadc11e91ef22344756cd2210aaa728cdca720fa6f15c71ba4842fec3429"><div class="ttname"><a href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa728cdca720fa6f15c71ba4842fec3429">CHILD_INSTALLING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d97/child__sa_8h_source.html#l00053">child_sa.h:53</a></div></div>
<div class="ttc" id="group__child__sa_html_gga1be90cadc11e91ef22344756cd2210aaa346de0e848992f6479566be0f2aaf4ba"><div class="ttname"><a href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa346de0e848992f6479566be0f2aaf4ba">CHILD_DELETING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d97/child__sa_8h_source.html#l00083">child_sa.h:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga35703a9e7caf567eda89979fb258964c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d4a/structchild__sa__t.html">child_sa_t</a>* child_sa_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dcf/structhost__t.html">host_t</a> *&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dcf/structhost__t.html">host_t</a> *&#160;</td>
          <td class="paramname"><em>other</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/dd6/structchild__cfg__t.html">child_cfg_t</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>rekey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/dbb/group__types__i.html#gabb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>encap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int&#160;</td>
          <td class="paramname"><em>mark_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int&#160;</td>
          <td class="paramname"><em>mark_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor to create a child SA negotiated with IKE.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">me</td><td>own address </td></tr>
    <tr><td class="paramname">other</td><td>remote address </td></tr>
    <tr><td class="paramname">config</td><td>config to use for this CHILD_SA </td></tr>
    <tr><td class="paramname">reqid</td><td>reqid of old CHILD_SA when rekeying, 0 otherwise </td></tr>
    <tr><td class="paramname">encap</td><td>TRUE to enable UDP encapsulation (NAT traversal) </td></tr>
    <tr><td class="paramname">mark_in</td><td>explicit inbound mark value to use, 0 for config </td></tr>
    <tr><td class="paramname">mark_out</td><td>explicit outbound mark value to use, 0 for config </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../d8/d4a/structchild__sa__t.html">child_sa_t</a> object</dd></dl>
<p>Described in header. </p>

<p>Definition at line <a class="el" href="../../dd/d99/child__sa_8c_source.html#l01215">1215</a> of file <a class="el" href="../../dd/d99/child__sa_8c_source.html">child_sa.c</a>.</p>

<p>References <a class="el" href="../../dc/dcc/array_8c_source.html#l00161">array_create()</a>, <a class="el" href="../../dc/d21/daemon_8c_source.html#l00089">charon</a>, <a class="el" href="../../d4/d97/child__sa_8h_source.html#l00043">CHILD_CREATED</a>, <a class="el" href="../../df/ded/host_8h_source.html#l00050">host_t::clone</a>, <a class="el" href="../../db/d62/pkcs11_8h_source.html#l01233">FALSE</a>, <a class="el" href="../../d2/d69/trap__manager_8h_source.html#l00067">trap_manager_t::find_reqid</a>, <a class="el" href="../../da/d07/child__cfg_8h_source.html#l00191">child_cfg_t::get_close_action</a>, <a class="el" href="../../da/d07/child__cfg_8h_source.html#l00184">child_cfg_t::get_dpd_action</a>, <a class="el" href="../../da/d07/child__cfg_8h_source.html#l00228">child_cfg_t::get_mark</a>, <a class="el" href="../../dd/d99/child__sa_8c_source.html#l01180">get_proxy_addr()</a>, <a class="el" href="../../da/d07/child__cfg_8h_source.html#l00281">child_cfg_t::get_ref</a>, <a class="el" href="../../da/d07/child__cfg_8h_source.html#l00220">child_cfg_t::get_reqid</a>, <a class="el" href="../../de/d10/object_8h_source.html#l00043">INIT</a>, <a class="el" href="../../d4/dab/ipsec__types_8h_source.html#l00107">IPCOMP_NONE</a>, <a class="el" href="../../d4/dab/ipsec__types_8h_source.html#l00174">MARK_UNIQUE</a>, <a class="el" href="../../d4/dab/ipsec__types_8h_source.html#l00042">MODE_TRANSPORT</a>, <a class="el" href="../../d4/dab/ipsec__types_8h_source.html#l00044">MODE_TUNNEL</a>, <a class="el" href="../../d1/d41/proposal_8h_source.html#l00042">PROTO_NONE</a>, <a class="el" href="../../de/dcd/atomics_8c_source.html#l00031">ref_get()</a>, <a class="el" href="../../df/d73/time_8c_source.html#l00031">time_monotonic()</a>, <a class="el" href="../../d0/d51/daemon_8h_source.html#l00230">daemon_t::traps</a>, <a class="el" href="../../db/d62/pkcs11_8h_source.html#l01236">TRUE</a>, and <a class="el" href="../../d4/d49/lookip__msg_8h_source.html#l00099">unique_id</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d9a/child__create_8c_source.html#l00929">METHOD()</a>, and <a class="el" href="../../de/dfc/ha__dispatcher_8c_source.html#l00635">process_child_add()</a>.</p>
<div class="fragment"><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;{</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <a class="code" href="../../df/d24/structprivate__child__sa__t.html">private_child_sa_t</a> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keyword">static</span> <a class="code" href="../../d0/de0/group__atomics__i.html#ga37e4dbb832eb2d21b1864f63365ac373">refcount_t</a> <a class="code" href="../../d4/d49/lookip__msg_8h.html#a300bb6cf5b184e200523e9bce8346dc4">unique_id</a> = 0, unique_mark = 0, mark;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="../../db/d52/group__object__i.html#ga30018aa95f4403e42ef13cead122d417">INIT</a>(<span class="keyword">this</span>,</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        .<span class="keyword">public</span> = {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;            .get_name = _get_name,</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;            .get_reqid = _get_reqid,</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            .get_unique_id = _get_unique_id,</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            .get_config = _get_config,</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            .get_state = _get_state,</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            .set_state = _set_state,</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            .get_spi = _get_spi,</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            .get_cpi = _get_cpi,</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            .get_protocol = _get_protocol,</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            .set_protocol = _set_protocol,</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            .get_mode = _get_mode,</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            .set_mode = _set_mode,</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            .get_proposal = _get_proposal,</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            .set_proposal = _set_proposal,</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            .get_lifetime = _get_lifetime,</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            .get_installtime = _get_installtime,</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            .get_usestats = _get_usestats,</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            .get_mark = _get_mark,</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            .has_encap = _has_encap,</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            .get_ipcomp = _get_ipcomp,</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            .set_ipcomp = _set_ipcomp,</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            .get_close_action = _get_close_action,</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            .set_close_action = _set_close_action,</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            .get_dpd_action = _get_dpd_action,</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;            .set_dpd_action = _set_dpd_action,</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            .alloc_spi = _alloc_spi,</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            .alloc_cpi = _alloc_cpi,</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            .install = _install,</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            .update = _update,</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            .add_policies = _add_policies,</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            .create_ts_enumerator = _create_ts_enumerator,</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            .create_policy_enumerator = _create_policy_enumerator,</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            .destroy = _destroy,</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        },</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        .encap = encap,</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        .ipcomp = <a class="code" href="../../d3/d2d/group__ipsec__types.html#gga982f0e9c1d091a66df382c6456e367daaaeee9d4b38714d5ff9351794b34ea243">IPCOMP_NONE</a>,</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        .state = <a class="code" href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa7954a4773a11c7958b7d10d566cbadab">CHILD_CREATED</a>,</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        .my_ts = <a class="code" href="../../d1/d0e/group__array.html#ga9acc78bc2e06102ff37133b5aa0e0a4f">array_create</a>(0, 0),</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        .other_ts = <a class="code" href="../../d1/d0e/group__array.html#ga9acc78bc2e06102ff37133b5aa0e0a4f">array_create</a>(0, 0),</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        .protocol = <a class="code" href="../../dd/d64/group__proposal.html#gga9d38b4dd5d473db346d2cabd0cf441cda13d71dc94a42ee4eecb0e0898055ebe8">PROTO_NONE</a>,</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        .mode = <a class="code" href="../../d3/d2d/group__ipsec__types.html#ggaece48cbb898dc0b6b592b3fb645b0eb0afcb6a6b9643f06c3a331ed7d6709560f">MODE_TUNNEL</a>,</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        .close_action = config-&gt;<a class="code" href="../../d8/dd6/structchild__cfg__t.html#acf6b85bd3282c88bcf866617f1e24b73">get_close_action</a>(config),</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        .dpd_action = config-&gt;<a class="code" href="../../d8/dd6/structchild__cfg__t.html#ac8b39f86b066d60f70a9311afdca1849">get_dpd_action</a>(config),</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        .reqid = config-&gt;<a class="code" href="../../d8/dd6/structchild__cfg__t.html#aac80216c40c650bfbd3c999b69fd3e1f">get_reqid</a>(config),</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        .unique_id = <a class="code" href="../../d0/de0/group__atomics__i.html#ga34879d8b38ea6a9f3413a100b181bf53">ref_get</a>(&amp;unique_id),</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        .mark_in = config-&gt;<a class="code" href="../../d8/dd6/structchild__cfg__t.html#a3b49168b4398e6c5d0aa0593c0b6fc49">get_mark</a>(config, <a class="code" href="../../db/d62/pkcs11_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>),</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        .mark_out = config-&gt;<a class="code" href="../../d8/dd6/structchild__cfg__t.html#a3b49168b4398e6c5d0aa0593c0b6fc49">get_mark</a>(config, <a class="code" href="../../db/d62/pkcs11_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>),</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        .install_time = <a class="code" href="../../d9/df9/group__time__i.html#gafa0e4f2038e67e1bb455fb3730f59a1e">time_monotonic</a>(NULL),</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    );</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    this-&gt;config = config;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    config-&gt;<a class="code" href="../../d8/dd6/structchild__cfg__t.html#a9a8bdef2037ac4a78658eb5723420994">get_ref</a>(config);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordflow">if</span> (mark_in)</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        this-&gt;mark_in.value = mark_in;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="keywordflow">if</span> (mark_out)</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    {</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        this-&gt;mark_out.value = mark_out;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="keywordflow">if</span> (this-&gt;mark_in.value == <a class="code" href="../../d3/d2d/group__ipsec__types.html#ga69ec6bec439013cc24034ee024f79858">MARK_UNIQUE</a> ||</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        this-&gt;mark_out.value == <a class="code" href="../../d3/d2d/group__ipsec__types.html#ga69ec6bec439013cc24034ee024f79858">MARK_UNIQUE</a>)</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    {</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        mark = <a class="code" href="../../d0/de0/group__atomics__i.html#ga34879d8b38ea6a9f3413a100b181bf53">ref_get</a>(&amp;unique_mark);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="keywordflow">if</span> (this-&gt;mark_in.value == <a class="code" href="../../d3/d2d/group__ipsec__types.html#ga69ec6bec439013cc24034ee024f79858">MARK_UNIQUE</a>)</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        {</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            this-&gt;mark_in.value = mark;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        }</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <span class="keywordflow">if</span> (this-&gt;mark_out.value == <a class="code" href="../../d3/d2d/group__ipsec__types.html#ga69ec6bec439013cc24034ee024f79858">MARK_UNIQUE</a>)</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        {</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            this-&gt;mark_out.value = mark;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    }</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">if</span> (!this-&gt;reqid)</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    {</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <span class="comment">/* reuse old reqid if we are rekeying an existing CHILD_SA. While the</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment">         * reqid cache would find the same reqid for our selectors, this does</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment">         * not work in a special case: If an SA is triggered by a trap policy,</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">         * but the negotiated SA gets narrowed, we still must reuse the same</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment">         * reqid to successfully &quot;trigger&quot; the SA on the kernel level. Rekeying</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="comment">         * such an SA requires an explicit reqid, as the cache currently knows</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="comment">         * the original selectors only for that reqid. */</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <span class="keywordflow">if</span> (rekey)</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            this-&gt;reqid = rekey;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        }</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            this-&gt;reqid = <a class="code" href="../../d0/db7/group__libcharon.html#ga3f85ddc91855d7d74beeb2f21fb74dbb">charon</a>-&gt;<a class="code" href="../../d0/def/structdaemon__t.html#a0ebf7135b4b3afb96c950330a4996db2">traps</a>-&gt;<a class="code" href="../../de/da4/structtrap__manager__t.html#a1baea79a9d630e2436955e321b912622">find_reqid</a>(<a class="code" href="../../d0/db7/group__libcharon.html#ga3f85ddc91855d7d74beeb2f21fb74dbb">charon</a>-&gt;<a class="code" href="../../d0/def/structdaemon__t.html#a0ebf7135b4b3afb96c950330a4996db2">traps</a>, config);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        this-&gt;static_reqid = <a class="code" href="../../db/d62/pkcs11_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    }</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="comment">/* MIPv6 proxy transport mode sets SA endpoints to TS hosts */</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="keywordflow">if</span> (config-&gt;get_mode(config) == <a class="code" href="../../d3/d2d/group__ipsec__types.html#ggaece48cbb898dc0b6b592b3fb645b0eb0a689a56f24c990f2e380221f48aac5a49">MODE_TRANSPORT</a> &amp;&amp;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        config-&gt;use_proxy_mode(config))</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    {</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        this-&gt;mode = <a class="code" href="../../d3/d2d/group__ipsec__types.html#ggaece48cbb898dc0b6b592b3fb645b0eb0a689a56f24c990f2e380221f48aac5a49">MODE_TRANSPORT</a>;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        this-&gt;my_addr = <a class="code" href="../../dd/d99/child__sa_8c.html#ab58d444bee87c985dcdfcfc7a1cd4dac">get_proxy_addr</a>(config, me, <a class="code" href="../../db/d62/pkcs11_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        this-&gt;other_addr = <a class="code" href="../../dd/d99/child__sa_8c.html#ab58d444bee87c985dcdfcfc7a1cd4dac">get_proxy_addr</a>(config, other, <a class="code" href="../../db/d62/pkcs11_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    {</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        this-&gt;my_addr = me-&gt;<a class="code" href="../../d5/dcf/structhost__t.html#aebe9cd9ffd665b04e223c5e8b6ce7114">clone</a>(me);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        this-&gt;other_addr = other-&gt;<a class="code" href="../../d5/dcf/structhost__t.html#aebe9cd9ffd665b04e223c5e8b6ce7114">clone</a>(other);</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    }</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="keywordflow">return</span> &amp;this-&gt;<span class="keyword">public</span>;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;}</div>
<div class="ttc" id="pkcs11_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../db/d62/pkcs11_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d62/pkcs11_8h_source.html#l01233">pkcs11.h:1233</a></div></div>
<div class="ttc" id="structtrap__manager__t_html_a1baea79a9d630e2436955e321b912622"><div class="ttname"><a href="../../de/da4/structtrap__manager__t.html#a1baea79a9d630e2436955e321b912622">trap_manager_t::find_reqid</a></div><div class="ttdeci">u_int32_t(* find_reqid)(trap_manager_t *this, child_cfg_t *child)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d69/trap__manager_8h_source.html#l00067">trap_manager.h:67</a></div></div>
<div class="ttc" id="lookip__msg_8h_html_a300bb6cf5b184e200523e9bce8346dc4"><div class="ttname"><a href="../../d4/d49/lookip__msg_8h.html#a300bb6cf5b184e200523e9bce8346dc4">unique_id</a></div><div class="ttdeci">unsigned int unique_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d49/lookip__msg_8h_source.html#l00099">lookip_msg.h:99</a></div></div>
<div class="ttc" id="structchild__cfg__t_html_acf6b85bd3282c88bcf866617f1e24b73"><div class="ttname"><a href="../../d8/dd6/structchild__cfg__t.html#acf6b85bd3282c88bcf866617f1e24b73">child_cfg_t::get_close_action</a></div><div class="ttdeci">action_t(* get_close_action)(child_cfg_t *this)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d07/child__cfg_8h_source.html#l00191">child_cfg.h:191</a></div></div>
<div class="ttc" id="group__time__i_html_gafa0e4f2038e67e1bb455fb3730f59a1e"><div class="ttname"><a href="../../d9/df9/group__time__i.html#gafa0e4f2038e67e1bb455fb3730f59a1e">time_monotonic</a></div><div class="ttdeci">time_t time_monotonic(timeval_t *tv)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d73/time_8c_source.html#l00031">time.c:31</a></div></div>
<div class="ttc" id="child__sa_8c_html_ab58d444bee87c985dcdfcfc7a1cd4dac"><div class="ttname"><a href="../../dd/d99/child__sa_8c.html#ab58d444bee87c985dcdfcfc7a1cd4dac">get_proxy_addr</a></div><div class="ttdeci">static host_t * get_proxy_addr(child_cfg_t *config, host_t *ike, bool local)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/child__sa_8c_source.html#l01180">child_sa.c:1180</a></div></div>
<div class="ttc" id="group__child__sa_html_gga1be90cadc11e91ef22344756cd2210aaa7954a4773a11c7958b7d10d566cbadab"><div class="ttname"><a href="../../df/d25/group__child__sa.html#gga1be90cadc11e91ef22344756cd2210aaa7954a4773a11c7958b7d10d566cbadab">CHILD_CREATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d97/child__sa_8h_source.html#l00043">child_sa.h:43</a></div></div>
<div class="ttc" id="structhost__t_html_aebe9cd9ffd665b04e223c5e8b6ce7114"><div class="ttname"><a href="../../d5/dcf/structhost__t.html#aebe9cd9ffd665b04e223c5e8b6ce7114">host_t::clone</a></div><div class="ttdeci">host_t *(* clone)(host_t *this)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/ded/host_8h_source.html#l00050">host.h:50</a></div></div>
<div class="ttc" id="group__atomics__i_html_ga37e4dbb832eb2d21b1864f63365ac373"><div class="ttname"><a href="../../d0/de0/group__atomics__i.html#ga37e4dbb832eb2d21b1864f63365ac373">refcount_t</a></div><div class="ttdeci">u_int refcount_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/atomics_8h_source.html#l00028">atomics.h:28</a></div></div>
<div class="ttc" id="group__atomics__i_html_ga34879d8b38ea6a9f3413a100b181bf53"><div class="ttname"><a href="../../d0/de0/group__atomics__i.html#ga34879d8b38ea6a9f3413a100b181bf53">ref_get</a></div><div class="ttdeci">refcount_t ref_get(refcount_t *ref)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/atomics_8c_source.html#l00031">atomics.c:31</a></div></div>
<div class="ttc" id="structchild__cfg__t_html_aac80216c40c650bfbd3c999b69fd3e1f"><div class="ttname"><a href="../../d8/dd6/structchild__cfg__t.html#aac80216c40c650bfbd3c999b69fd3e1f">child_cfg_t::get_reqid</a></div><div class="ttdeci">u_int32_t(* get_reqid)(child_cfg_t *this)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d07/child__cfg_8h_source.html#l00220">child_cfg.h:220</a></div></div>
<div class="ttc" id="group__libcharon_html_ga3f85ddc91855d7d74beeb2f21fb74dbb"><div class="ttname"><a href="../../d0/db7/group__libcharon.html#ga3f85ddc91855d7d74beeb2f21fb74dbb">charon</a></div><div class="ttdeci">daemon_t * charon</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d21/daemon_8c_source.html#l00089">daemon.c:89</a></div></div>
<div class="ttc" id="structprivate__child__sa__t_html"><div class="ttname"><a href="../../df/d24/structprivate__child__sa__t.html">private_child_sa_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/child__sa_8c_source.html#l00048">child_sa.c:48</a></div></div>
<div class="ttc" id="group__ipsec__types_html_ga69ec6bec439013cc24034ee024f79858"><div class="ttname"><a href="../../d3/d2d/group__ipsec__types.html#ga69ec6bec439013cc24034ee024f79858">MARK_UNIQUE</a></div><div class="ttdeci">#define MARK_UNIQUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dab/ipsec__types_8h_source.html#l00174">ipsec_types.h:174</a></div></div>
<div class="ttc" id="structchild__cfg__t_html_a9a8bdef2037ac4a78658eb5723420994"><div class="ttname"><a href="../../d8/dd6/structchild__cfg__t.html#a9a8bdef2037ac4a78658eb5723420994">child_cfg_t::get_ref</a></div><div class="ttdeci">child_cfg_t *(* get_ref)(child_cfg_t *this)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d07/child__cfg_8h_source.html#l00281">child_cfg.h:281</a></div></div>
<div class="ttc" id="structchild__cfg__t_html_ac8b39f86b066d60f70a9311afdca1849"><div class="ttname"><a href="../../d8/dd6/structchild__cfg__t.html#ac8b39f86b066d60f70a9311afdca1849">child_cfg_t::get_dpd_action</a></div><div class="ttdeci">action_t(* get_dpd_action)(child_cfg_t *this)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d07/child__cfg_8h_source.html#l00184">child_cfg.h:184</a></div></div>
<div class="ttc" id="structchild__cfg__t_html_a3b49168b4398e6c5d0aa0593c0b6fc49"><div class="ttname"><a href="../../d8/dd6/structchild__cfg__t.html#a3b49168b4398e6c5d0aa0593c0b6fc49">child_cfg_t::get_mark</a></div><div class="ttdeci">mark_t(* get_mark)(child_cfg_t *this, bool inbound)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d07/child__cfg_8h_source.html#l00228">child_cfg.h:228</a></div></div>
<div class="ttc" id="group__array_html_ga9acc78bc2e06102ff37133b5aa0e0a4f"><div class="ttname"><a href="../../d1/d0e/group__array.html#ga9acc78bc2e06102ff37133b5aa0e0a4f">array_create</a></div><div class="ttdeci">array_t * array_create(u_int esize, u_int8_t reserve)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcc/array_8c_source.html#l00161">array.c:161</a></div></div>
<div class="ttc" id="group__ipsec__types_html_ggaece48cbb898dc0b6b592b3fb645b0eb0a689a56f24c990f2e380221f48aac5a49"><div class="ttname"><a href="../../d3/d2d/group__ipsec__types.html#ggaece48cbb898dc0b6b592b3fb645b0eb0a689a56f24c990f2e380221f48aac5a49">MODE_TRANSPORT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dab/ipsec__types_8h_source.html#l00042">ipsec_types.h:42</a></div></div>
<div class="ttc" id="pkcs11_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../db/d62/pkcs11_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d62/pkcs11_8h_source.html#l01236">pkcs11.h:1236</a></div></div>
<div class="ttc" id="group__ipsec__types_html_gga982f0e9c1d091a66df382c6456e367daaaeee9d4b38714d5ff9351794b34ea243"><div class="ttname"><a href="../../d3/d2d/group__ipsec__types.html#gga982f0e9c1d091a66df382c6456e367daaaeee9d4b38714d5ff9351794b34ea243">IPCOMP_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dab/ipsec__types_8h_source.html#l00107">ipsec_types.h:107</a></div></div>
<div class="ttc" id="group__object__i_html_ga30018aa95f4403e42ef13cead122d417"><div class="ttname"><a href="../../db/d52/group__object__i.html#ga30018aa95f4403e42ef13cead122d417">INIT</a></div><div class="ttdeci">#define INIT(this,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d10/object_8h_source.html#l00043">object.h:43</a></div></div>
<div class="ttc" id="structdaemon__t_html_a0ebf7135b4b3afb96c950330a4996db2"><div class="ttname"><a href="../../d0/def/structdaemon__t.html#a0ebf7135b4b3afb96c950330a4996db2">daemon_t::traps</a></div><div class="ttdeci">trap_manager_t * traps</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d51/daemon_8h_source.html#l00230">daemon.h:230</a></div></div>
<div class="ttc" id="group__ipsec__types_html_ggaece48cbb898dc0b6b592b3fb645b0eb0afcb6a6b9643f06c3a331ed7d6709560f"><div class="ttname"><a href="../../d3/d2d/group__ipsec__types.html#ggaece48cbb898dc0b6b592b3fb645b0eb0afcb6a6b9643f06c3a331ed7d6709560f">MODE_TUNNEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dab/ipsec__types_8h_source.html#l00044">ipsec_types.h:44</a></div></div>
<div class="ttc" id="group__proposal_html_gga9d38b4dd5d473db346d2cabd0cf441cda13d71dc94a42ee4eecb0e0898055ebe8"><div class="ttname"><a href="../../dd/d64/group__proposal.html#gga9d38b4dd5d473db346d2cabd0cf441cda13d71dc94a42ee4eecb0e0898055ebe8">PROTO_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d41/proposal_8h_source.html#l00042">proposal.h:42</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../df/d25/group__child__sa_ga35703a9e7caf567eda89979fb258964c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../df/d25/group__child__sa_ga35703a9e7caf567eda89979fb258964c_icgraph.svg" width="100%" height="366"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga27b9bc84afe9a793e93fec506077b1ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d70/structenum__name__t.html">enum_name_t</a>* child_sa_state_names</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>enum strings for child_sa_state_t. </p>

<p>Referenced by <a class="el" href="../../d4/d19/rekey__ike__sa__job_8c_source.html#l00052">get_retry_delay()</a>, <a class="el" href="../../d1/d64/vici__query_8c_source.html#l00078">list_child()</a>, and <a class="el" href="../../dd/df3/stroke__list_8c_source.html#l00206">log_child_sa()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Jan 20 2016 14:04:15 for strongSwan by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
